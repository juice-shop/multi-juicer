default values render correctly:
  1: |
    apiVersion: v1
    data:
      config.json: |2

        {
          "cookie": {
            "name": "balancer",
            "secure": false
          },
          "juiceShop": {
            "affinity": {},
            "config": {
              "application": {
                "favicon": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico",
                "logo": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png",
                "showGitHubLinks": false,
                "showVersionNumber": false
              },
              "challenges": {
                "showHints": true
              },
              "ctf": {
                "showFlagsInNotifications": false
              },
              "hackingInstructor": {
                "isEnabled": true
              }
            },
            "containerSecurityContext": {
              "allowPrivilegeEscalation": false,
              "capabilities": {
                "drop": [
                  "ALL"
                ]
              }
            },
            "ctfKey": "zLp@.-6fMW6L-7R3b!9uR_K!NfkkTr",
            "env": [],
            "envFrom": [],
            "image": "bkimminich/juice-shop",
            "imagePullPolicy": "IfNotPresent",
            "imagePullSecrets": [],
            "nodeEnv": "multi-juicer",
            "pod": {
              "annotations": {},
              "labels": {}
            },
            "podSecurityContext": {
              "runAsNonRoot": true
            },
            "resources": {
              "requests": {
                "cpu": "150m",
                "memory": "300Mi"
              }
            },
            "runtimeClassName": null,
            "tag": "v17.3.0",
            "tolerations": [],
            "volumeMounts": [],
            "volumes": []
          },
          "maxInstances": 10
        }
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-config
  2: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      replicas: 1
      selector:
        matchLabels:
          app.kubernetes.io/instance: balancer-RELEASE-NAME
          app.kubernetes.io/name: balancer
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          annotations:
            checksum/config: 8af1c1aad3fc02724fb8ea0d79d3b795b5f8fbc8f3d9ced89d5cfd4c320d9f01
            checksum/secret: 7c430d8f6cf074b992d9f63d9f6fc51256eef05865623b5f19c6c12cef547179
          labels:
            app.kubernetes.io/instance: balancer-RELEASE-NAME
            app.kubernetes.io/name: balancer
            app.kubernetes.io/part-of: multi-juicer
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: MULTI_JUICER_CONFIG_ADMIN_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      key: adminPassword
                      name: balancer-secret
                - name: MULTI_JUICER_CONFIG_COOKIE_SIGNING_KEY
                  valueFrom:
                    secretKeyRef:
                      key: cookieParserSecret
                      name: balancer-secret
              image: ghcr.io/juice-shop/multi-juicer/balancer:v42.0.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /balancer/api/health
                  port: http
              name: multi-juicer
              ports:
                - containerPort: 8080
                  name: http
                - containerPort: 8081
                  name: metrics
              readinessProbe:
                httpGet:
                  path: /balancer/api/readiness
                  port: http
              resources:
                limits:
                  cpu: 400m
                  memory: 256Mi
                requests:
                  cpu: 400m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /config/config.json
                  name: config-volume
                  readOnly: true
                  subPath: config.json
          securityContext:
            runAsNonRoot: true
          serviceAccountName: balancer
          volumes:
            - configMap:
                name: balancer-config
              name: config-volume
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: balancer
    subjects:
      - kind: ServiceAccount
        name: balancer
  4: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - create
          - list
          - delete
          - patch
          - watch
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - create
          - delete
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - delete
  5: |
    apiVersion: v1
    data:
      adminPassword: QUJDREVGR0g=
      cookieParserSecret: VEhJU19JU19BX0VYQU1QTEVfRE9OVF9VU0VfVEhJU19BU19USEVfQUNUVUFMX1NFQ1JFVA==
    kind: Secret
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-secret
    type: Opaque
  6: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      ports:
        - name: web
          port: 8080
      selector:
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
  8: |
    apiVersion: batch/v1
    kind: CronJob
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: cleanup-job
    spec:
      failedJobsHistoryLimit: 1
      jobTemplate:
        spec:
          template:
            metadata:
              labels:
                app.kubernetes.io/component: garbage-collector
                app.kubernetes.io/instance: cleaner-RELEASE-NAME
                app.kubernetes.io/managed-by: Helm
                app.kubernetes.io/name: cleaner
                app.kubernetes.io/part-of: multi-juicer
                app.kubernetes.io/version: 42.0.0
            spec:
              containers:
                - env:
                    - name: NAMESPACE
                      value: NAMESPACE
                    - name: MAX_INACTIVE_DURATION
                      value: 24h
                  image: ghcr.io/juice-shop/multi-juicer/cleaner:v42.0.0
                  imagePullPolicy: IfNotPresent
                  name: cleanup-job
                  securityContext:
                    allowPrivilegeEscalation: false
                    capabilities:
                      drop:
                        - ALL
                    readOnlyRootFilesystem: true
              restartPolicy: Never
              securityContext:
                runAsNonRoot: true
              serviceAccountName: juice-cleaner
      schedule: 0 * * * *
      successfulJobsHistoryLimit: 1
  9: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: juice-cleaner
    subjects:
      - kind: ServiceAccount
        name: juice-cleaner
  10: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - delete
          - list
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - delete
  11: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
  12: |
    apiVersion: v1
    data:
      multi-juicer.yaml: |2-
        application:
          favicon: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico
          logo: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png
          showGitHubLinks: false
          showVersionNumber: false
        challenges:
          showHints: true
        ctf:
          showFlagsInNotifications: false
        hackingInstructor:
          isEnabled: true
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: vulnerable-app
        app.kubernetes.io/instance: juice-shop-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: juice-shop
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-shop-config
  13: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      selector:
        matchLabels:
          app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
          app.kubernetes.io/name: progress-watchdog
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          labels:
            app.kubernetes.io/component: progress-tracker
            app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: progress-watchdog
            app.kubernetes.io/part-of: multi-juicer
            app.kubernetes.io/version: 42.0.0
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
              image: ghcr.io/juice-shop/multi-juicer/progress-watchdog:v42.0.0
              imagePullPolicy: IfNotPresent
              name: progress-watchdog
              ports:
                - containerPort: 8080
                  name: http
              readinessProbe:
                httpGet:
                  path: /ready
                  port: http
                initialDelaySeconds: 5
              resources:
                limits:
                  cpu: 20m
                  memory: 48Mi
                requests:
                  cpu: 20m
                  memory: 48Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
          securityContext:
            runAsNonRoot: true
          serviceAccountName: progress-watchdog
  14: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: progress-watchdog
    subjects:
      - kind: ServiceAccount
        name: progress-watchdog
  15: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - patch
  16: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
  17: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      ports:
        - name: http
          port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
full values render out correctly:
  1: |
    raw: "MultiJuicer deployed! \U0001F389\U0001F973\n\nMultiJuicer doesn't come with a default way to expose it to the world.\nYou can find guides for specific cloud providers here: https://github.com/juice-shop/multi-juicer/tree/main/guides\n\nTo test it locally run:\n$ kubectl port-forward --namespace=\"NAMESPACE\" service/balancer 8080:8080\nYou'll then be able to access the JuiceBalancer in your browser under http://localhost:8080\n\nTo administrate the cluster you can log into the JuiceBalancer with the admin account:\nUsername: admin\nPassword: ${kubectl get secrets balancer-secret --namespace=\"NAMESPACE\" -o=jsonpath='{.data.adminPassword}' | base64 --decode}"
  2: |
    apiVersion: v1
    data:
      config.json: |2

        {
          "cookie": {
            "name": "balancer",
            "secure": true
          },
          "juiceShop": {
            "affinity": {},
            "config": {
              "application": {
                "favicon": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico",
                "logo": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png",
                "showGitHubLinks": false,
                "showVersionNumber": false
              },
              "challenges": {
                "showHints": true
              },
              "ctf": {
                "showFlagsInNotifications": false
              },
              "hackingInstructor": {
                "isEnabled": true
              }
            },
            "containerSecurityContext": {
              "allowPrivilegeEscalation": false,
              "capabilities": {
                "drop": [
                  "ALL"
                ]
              }
            },
            "ctfKey": "zLp@.-6fMW6L-7R3b!9uR_K!NfkkTr",
            "env": [],
            "envFrom": [],
            "image": "bkimminich/juice-shop",
            "imagePullPolicy": "IfNotPresent",
            "imagePullSecrets": [],
            "nodeEnv": "multi-juicer",
            "pod": {
              "annotations": {},
              "labels": {}
            },
            "podSecurityContext": {
              "runAsNonRoot": true
            },
            "resources": {
              "requests": {
                "cpu": "150m",
                "memory": "300Mi"
              }
            },
            "runtimeClassName": null,
            "tag": "v17.3.0",
            "tolerations": [],
            "volumeMounts": [],
            "volumes": []
          },
          "maxInstances": 10
        }
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-config
  3: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      replicas: 3
      selector:
        matchLabels:
          app.kubernetes.io/instance: balancer-RELEASE-NAME
          app.kubernetes.io/name: balancer
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          annotations:
            checksum/config: 97a2ab33c67c30cb3d5319fd0792d7c3c0a8acd56890efdb1316e52336fcb8f1
            checksum/secret: 7c430d8f6cf074b992d9f63d9f6fc51256eef05865623b5f19c6c12cef547179
          labels:
            app.kubernetes.io/instance: balancer-RELEASE-NAME
            app.kubernetes.io/name: balancer
            app.kubernetes.io/part-of: multi-juicer
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: MULTI_JUICER_CONFIG_ADMIN_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      key: adminPassword
                      name: balancer-secret
                - name: MULTI_JUICER_CONFIG_COOKIE_SIGNING_KEY
                  valueFrom:
                    secretKeyRef:
                      key: cookieParserSecret
                      name: balancer-secret
              image: ghcr.io/juice-shop/multi-juicer/balancer:v42.0.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /balancer/api/health
                  port: http
              name: multi-juicer
              ports:
                - containerPort: 8080
                  name: http
                - containerPort: 8081
                  name: metrics
              readinessProbe:
                httpGet:
                  path: /balancer/api/readiness
                  port: http
              resources:
                limits:
                  cpu: 400m
                  memory: 256Mi
                requests:
                  cpu: 400m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /config/config.json
                  name: config-volume
                  readOnly: true
                  subPath: config.json
          securityContext:
            runAsNonRoot: true
          serviceAccountName: balancer
          volumes:
            - configMap:
                name: balancer-config
              name: config-volume
  4: |
    apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      annotations:
        kubernetes.io/tls-acme: "true"
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: RELEASE-NAME-multi-juicer
    spec:
      ingressClassName: cool-ingress
      rules:
        - host: multi-juicer.local
          http:
            paths:
              - backend:
                  service:
                    name: balancer
                    port:
                      number: 8080
                path: /
                pathType: ImplementationSpecific
      tls:
        - hosts:
            - multi-juicer.local
          secretName: tls-secret
  5: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
        type: metrics
      name: balancer-metrics
    spec:
      ports:
        - name: metrics
          port: 80
      selector:
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
  6: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: balancer
    subjects:
      - kind: ServiceAccount
        name: balancer
  7: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - create
          - list
          - delete
          - patch
          - watch
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - create
          - delete
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - delete
  8: |
    apiVersion: v1
    data:
      adminPassword: QUJDREVGR0g=
      cookieParserSecret: VEhJU19JU19BX0VYQU1QTEVfRE9OVF9VU0VfVEhJU19BU19USEVfQUNUVUFMX1NFQ1JFVA==
    kind: Secret
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-secret
    type: Opaque
  9: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
  10: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      ports:
        - name: web
          port: 8080
      selector:
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
  11: |
    apiVersion: monitoring.coreos.com/v1
    kind: ServiceMonitor
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      endpoints:
        - path: /balancer/metrics
          port: metrics
      selector:
        matchLabels:
          app.kubernetes.io/instance: balancer-RELEASE-NAME
          app.kubernetes.io/name: balancer
          app.kubernetes.io/part-of: multi-juicer
          type: metrics
  12: |
    apiVersion: batch/v1
    kind: CronJob
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: cleanup-job
    spec:
      failedJobsHistoryLimit: 1
      jobTemplate:
        spec:
          template:
            metadata:
              labels:
                app.kubernetes.io/component: garbage-collector
                app.kubernetes.io/instance: cleaner-RELEASE-NAME
                app.kubernetes.io/managed-by: Helm
                app.kubernetes.io/name: cleaner
                app.kubernetes.io/part-of: multi-juicer
                app.kubernetes.io/version: 42.0.0
            spec:
              containers:
                - env:
                    - name: NAMESPACE
                      value: NAMESPACE
                    - name: MAX_INACTIVE_DURATION
                      value: 24h
                  image: ghcr.io/juice-shop/multi-juicer/cleaner:v42.0.0
                  imagePullPolicy: IfNotPresent
                  name: cleanup-job
                  securityContext:
                    allowPrivilegeEscalation: false
                    capabilities:
                      drop:
                        - ALL
                    readOnlyRootFilesystem: true
              restartPolicy: Never
              securityContext:
                runAsNonRoot: true
              serviceAccountName: juice-cleaner
      schedule: 0 * * * *
      successfulJobsHistoryLimit: 1
  13: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: juice-cleaner
    subjects:
      - kind: ServiceAccount
        name: juice-cleaner
  14: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - delete
          - list
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - delete
  15: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
  16: |
    apiVersion: v1
    data:
      instances.json: |-
        {
          "annotations": {
            "list": [
              {
                "builtIn": 1,
                "datasource": {
                  "type": "datasource",
                  "uid": "grafana"
                },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
              }
            ]
          },
          "editable": true,
          "fiscalYearStartMonth": 0,
          "graphTooltip": 0,
          "id": 29,
          "links": [],
          "panels": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "description": "",
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "decimals": 0,
                  "mappings": [
                    {
                      "options": {
                        "match": "null",
                        "result": {
                          "text": "N/A"
                        }
                      },
                      "type": "special"
                    }
                  ],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "#C8F2C2",
                        "value": null
                      },
                      {
                        "color": "#56A64B",
                        "value": 20
                      },
                      {
                        "color": "#37872D",
                        "value": 60
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 24,
                "x": 0,
                "y": 0
              },
              "id": 2,
              "maxDataPoints": 100,
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "horizontal",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "repeat": "difficulties",
              "repeatDirection": "h",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "sum without (category)(juiceshop_challenges_solved{team=\"$team\", difficulty=\"$difficulties\"}) / sum without (category)(juiceshop_challenges_total{team=\"$team\", difficulty=\"$difficulties\"}) * 100",
                  "legendFormat": "",
                  "refId": "A"
                }
              ],
              "title": "Solved $difficulties Star Challenges",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 8
              },
              "id": 25,
              "panels": [],
              "title": "Challenge Progress",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "mappings": [],
                  "max": 100,
                  "min": 1,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 19,
                "x": 0,
                "y": 9
              },
              "id": 78,
              "maxPerRow": 4,
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "center",
                "orientation": "vertical",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "max"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "sum by (category)(juiceshop_challenges_solved{team=\"$team\"}) / sum by (category)(juiceshop_challenges_total{team=\"$team\"}) * 100 != 0",
                  "interval": "",
                  "legendFormat": "{{category}} ",
                  "refId": "A"
                }
              ],
              "title": "Solved Challenges by Category",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "description": "The cheat score show a estimate of how likely it is that a team is cheating. This estimate is based on the time taken between challenges solved. Take this only as a approximation and never as direct prove that a team is in fact cheating.",
              "fieldConfig": {
                "defaults": {
                  "decimals": 0,
                  "mappings": [],
                  "max": 1,
                  "min": 0,
                  "noValue": "0",
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "super-light-yellow",
                        "value": 0.5
                      },
                      {
                        "color": "semi-dark-orange",
                        "value": 0.65
                      },
                      {
                        "color": "dark-red",
                        "value": 0.8
                      }
                    ]
                  },
                  "unit": "percentunit"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 5,
                "x": 19,
                "y": 9
              },
              "id": 85,
              "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "center",
                "orientation": "auto",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "last"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "juiceshop_cheat_score{team=\"$team\"}",
                  "interval": "",
                  "legendFormat": "",
                  "refId": "A"
                }
              ],
              "title": "Cheat Score",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 13
              },
              "id": 32,
              "panels": [],
              "title": "Business Metrics",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "Orders per Minute",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "line",
                    "fillOpacity": 10,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "decimals": 0,
                  "links": [],
                  "mappings": [],
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 5,
                "w": 24,
                "x": 0,
                "y": 14
              },
              "id": 11,
              "options": {
                "legend": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "juiceshop_user_social_interactions{team=\"$team\"}",
                  "interval": "1m",
                  "legendFormat": "{{type}}",
                  "refId": "A"
                }
              ],
              "title": "Social Interactions",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "bars",
                    "fillOpacity": 100,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "decimals": 0,
                  "links": [],
                  "mappings": [],
                  "min": 0,
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 6,
                "w": 16,
                "x": 0,
                "y": 19
              },
              "id": 64,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "increase(juiceshop_users_registered{team=\"$team\"}[1m])",
                  "legendFormat": "{{type}}",
                  "refId": "A"
                }
              ],
              "title": "User Signups",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "rgb(31, 120, 193)",
                    "mode": "fixed"
                  },
                  "decimals": 0,
                  "mappings": [
                    {
                      "options": {
                        "match": "null",
                        "result": {
                          "text": "N/A"
                        }
                      },
                      "type": "special"
                    }
                  ],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 8,
                "x": 16,
                "y": 19
              },
              "id": 13,
              "maxDataPoints": 100,
              "options": {
                "colorMode": "none",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "horizontal",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "expr": "juiceshop_users_registered{type=\"standard\", team=\"$team\"}",
                  "legendFormat": "Standard Users",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "rgb(31, 120, 193)",
                    "mode": "fixed"
                  },
                  "decimals": 0,
                  "mappings": [
                    {
                      "options": {
                        "match": "null",
                        "result": {
                          "text": "N/A"
                        }
                      },
                      "type": "special"
                    }
                  ],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 8,
                "x": 16,
                "y": 22
              },
              "id": 14,
              "maxDataPoints": 100,
              "options": {
                "colorMode": "none",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "horizontal",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "expr": "juiceshop_users_registered{type=\"deluxe\", team=\"$team\"}",
                  "legendFormat": "Deluxe Users",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "",
              "type": "stat"
            },
            {
              "collapsed": false,
              "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 25
              },
              "id": 39,
              "panels": [],
              "title": "Technical",
              "type": "row"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "Requests per Minute",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "bars",
                    "fillOpacity": 100,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "links": [],
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": [
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "2XX"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#37872D",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "3XX"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#96D98D",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "4XX"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#FF780A",
                          "mode": "fixed"
                        }
                      }
                    ]
                  },
                  {
                    "matcher": {
                      "id": "byName",
                      "options": "5XX"
                    },
                    "properties": [
                      {
                        "id": "color",
                        "value": {
                          "fixedColor": "#C4162A",
                          "mode": "fixed"
                        }
                      }
                    ]
                  }
                ]
              },
              "gridPos": {
                "h": 6,
                "w": 24,
                "x": 0,
                "y": 26
              },
              "id": 71,
              "options": {
                "legend": {
                  "calcs": [],
                  "displayMode": "list",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "editorMode": "code",
                  "expr": "increase(http_requests_count{app=\"juiceshop\", team=\"$team\"}[1m])",
                  "interval": "1m",
                  "legendFormat": "{{status_code}}",
                  "range": true,
                  "refId": "A"
                }
              ],
              "title": "HTTP Requests",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "line",
                    "fillOpacity": 10,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "links": [],
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "percent"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 10,
                "x": 0,
                "y": 32
              },
              "id": 46,
              "options": {
                "legend": {
                  "calcs": [
                    "mean",
                    "lastNotNull",
                    "max",
                    "min"
                  ],
                  "displayMode": "table",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "irate(process_cpu_user_seconds_total{team=~\"$team\"}[2m]) * 100",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "User CPU",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "irate(process_cpu_system_seconds_total{team=~\"$team\"}[2m]) * 100",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Sys CPU",
                  "refId": "B"
                }
              ],
              "title": "Process CPU Usage",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "line",
                    "fillOpacity": 10,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "links": [],
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "s"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 9,
                "x": 10,
                "y": 32
              },
              "id": 48,
              "options": {
                "legend": {
                  "calcs": [
                    "mean",
                    "lastNotNull",
                    "max",
                    "min"
                  ],
                  "displayMode": "table",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_eventloop_lag_seconds{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "{{team}}",
                  "refId": "A"
                }
              ],
              "title": "Event Loop Lag",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "fixedColor": "#F2495C",
                    "mode": "fixed"
                  },
                  "mappings": [
                    {
                      "options": {
                        "match": "null",
                        "result": {
                          "text": "N/A"
                        }
                      },
                      "type": "special"
                    }
                  ],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 4,
                "w": 5,
                "x": 19,
                "y": 32
              },
              "id": 52,
              "maxDataPoints": 100,
              "options": {
                "colorMode": "none",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "horizontal",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "lastNotNull"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "auto",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "sum(changes(process_start_time_seconds{team=~\"$team\"}[1m]))",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "{{instance}}",
                  "refId": "A"
                }
              ],
              "title": "Process Restart Times",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "thresholds"
                  },
                  "mappings": [
                    {
                      "options": {
                        "match": "null",
                        "result": {
                          "text": "N/A"
                        }
                      },
                      "type": "special"
                    }
                  ],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "none"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 3,
                "w": 5,
                "x": 19,
                "y": 36
              },
              "id": 50,
              "maxDataPoints": 100,
              "options": {
                "colorMode": "none",
                "graphMode": "none",
                "justifyMode": "auto",
                "orientation": "horizontal",
                "percentChangeColorMode": "standard",
                "reduceOptions": {
                  "calcs": [
                    "mean"
                  ],
                  "fields": "",
                  "values": false
                },
                "showPercentChange": false,
                "textMode": "name",
                "wideLayout": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "sum(nodejs_version_info{team=~\"$team\"}) by (version)",
                  "format": "time_series",
                  "instant": false,
                  "interval": "",
                  "intervalFactor": 1,
                  "legendFormat": "{{version}}",
                  "refId": "A"
                }
              ],
              "title": "Node.js Version",
              "type": "stat"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "line",
                    "fillOpacity": 10,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "links": [],
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "bytes"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 16,
                "x": 0,
                "y": 39
              },
              "id": 54,
              "options": {
                "legend": {
                  "calcs": [
                    "mean",
                    "lastNotNull",
                    "max",
                    "min"
                  ],
                  "displayMode": "table",
                  "placement": "right",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "process_resident_memory_bytes{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Process Memory",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_heap_size_total_bytes{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Heap Total",
                  "refId": "B"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_heap_size_used_bytes{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Heap Used",
                  "refId": "C"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_external_memory_bytes{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "External Memory",
                  "refId": "D"
                }
              ],
              "title": "Process Memory Usage",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "prometheus"
              },
              "fieldConfig": {
                "defaults": {
                  "color": {
                    "mode": "palette-classic"
                  },
                  "custom": {
                    "axisBorderShow": false,
                    "axisCenteredZero": false,
                    "axisColorMode": "text",
                    "axisLabel": "",
                    "axisPlacement": "auto",
                    "barAlignment": 0,
                    "barWidthFactor": 0.6,
                    "drawStyle": "line",
                    "fillOpacity": 10,
                    "gradientMode": "none",
                    "hideFrom": {
                      "legend": false,
                      "tooltip": false,
                      "viz": false
                    },
                    "insertNulls": false,
                    "lineInterpolation": "linear",
                    "lineWidth": 1,
                    "pointSize": 5,
                    "scaleDistribution": {
                      "type": "linear"
                    },
                    "showPoints": "never",
                    "spanNulls": false,
                    "stacking": {
                      "group": "A",
                      "mode": "none"
                    },
                    "thresholdsStyle": {
                      "mode": "off"
                    }
                  },
                  "links": [],
                  "mappings": [],
                  "thresholds": {
                    "mode": "absolute",
                    "steps": [
                      {
                        "color": "green",
                        "value": null
                      },
                      {
                        "color": "red",
                        "value": 80
                      }
                    ]
                  },
                  "unit": "short"
                },
                "overrides": []
              },
              "gridPos": {
                "h": 7,
                "w": 8,
                "x": 16,
                "y": 39
              },
              "id": 56,
              "options": {
                "legend": {
                  "calcs": [
                    "mean",
                    "lastNotNull",
                    "max",
                    "min"
                  ],
                  "displayMode": "table",
                  "placement": "bottom",
                  "showLegend": true
                },
                "tooltip": {
                  "hideZeros": false,
                  "mode": "multi",
                  "sort": "none"
                }
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_active_handles_total{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Active Handler",
                  "refId": "A"
                },
                {
                  "datasource": {
                    "type": "prometheus",
                    "uid": "prometheus"
                  },
                  "expr": "nodejs_active_requests_total{team=~\"$team\"}",
                  "format": "time_series",
                  "intervalFactor": 1,
                  "legendFormat": "Active Request",
                  "refId": "B"
                }
              ],
              "title": "Active Handlers/Requests Total",
              "type": "timeseries"
            },
            {
              "datasource": {
                "type": "loki",
                "uid": "P8E80F9AEF21F6940"
              },
              "fieldConfig": {
                "defaults": {},
                "overrides": []
              },
              "gridPos": {
                "h": 8,
                "w": 24,
                "x": 0,
                "y": 46
              },
              "id": 23,
              "options": {
                "dedupStrategy": "none",
                "enableInfiniteScrolling": false,
                "enableLogDetails": true,
                "prettifyLogMessage": false,
                "showCommonLabels": false,
                "showLabels": false,
                "showTime": true,
                "sortOrder": "Ascending",
                "wrapLogMessage": true
              },
              "pluginVersion": "11.5.2",
              "targets": [
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "editorMode": "code",
                  "expr": "{app=\"juice-shop\", team=\"$team\"}",
                  "queryType": "range",
                  "refId": "A"
                }
              ],
              "title": "Logs",
              "type": "logs"
            }
          ],
          "preload": false,
          "refresh": "10s",
          "schemaVersion": 40,
          "tags": [],
          "templating": {
            "list": [
              {
                "current": {
                  "text": [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                    "6"
                  ],
                  "value": [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                    "6"
                  ]
                },
                "hide": 2,
                "includeAll": true,
                "label": "Difficulty Levels supported by JuiceShop",
                "multi": true,
                "name": "difficulties",
                "options": [
                  {
                    "selected": false,
                    "text": "All",
                    "value": "$__all"
                  },
                  {
                    "selected": true,
                    "text": "1",
                    "value": "1"
                  },
                  {
                    "selected": true,
                    "text": "2",
                    "value": "2"
                  },
                  {
                    "selected": true,
                    "text": "3",
                    "value": "3"
                  },
                  {
                    "selected": true,
                    "text": "4",
                    "value": "4"
                  },
                  {
                    "selected": true,
                    "text": "5",
                    "value": "5"
                  },
                  {
                    "selected": true,
                    "text": "6",
                    "value": "6"
                  }
                ],
                "query": "1,2,3,4,5,6",
                "type": "custom"
              },
              {
                "current": {
                  "text": "test",
                  "value": "test"
                },
                "datasource": {
                  "type": "prometheus",
                  "uid": "prometheus"
                },
                "definition": "label_values(juiceshop_challenges_total, team)",
                "includeAll": false,
                "label": "Team",
                "name": "team",
                "options": [],
                "query": "label_values(juiceshop_challenges_total, team)",
                "refresh": 2,
                "regex": "",
                "type": "query"
              }
            ]
          },
          "time": {
            "from": "now-6h",
            "to": "now"
          },
          "timepicker": {},
          "timezone": "",
          "title": "MultiJuicer - Instance Dashboard",
          "uid": "Sj-cIdwZk",
          "version": 1,
          "weekStart": ""
        }
    kind: ConfigMap
    metadata:
      labels:
        grafana_dashboard: "1"
      name: multijuicer-instance
  17: |
    apiVersion: v1
    data:
      multi-juicer.yaml: |2-
        application:
          favicon: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico
          logo: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png
          showGitHubLinks: false
          showVersionNumber: false
        challenges:
          showHints: true
        ctf:
          showFlagsInNotifications: false
        hackingInstructor:
          isEnabled: true
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: vulnerable-app
        app.kubernetes.io/instance: juice-shop-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: juice-shop
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-shop-config
  18: |
    apiVersion: monitoring.coreos.com/v1
    kind: ServiceMonitor
    metadata:
      labels:
        app.kubernetes.io/component: vulnerable-app
        app.kubernetes.io/instance: juice-shop-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: juice-shop
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-shops
    spec:
      endpoints:
        - targetPort: 3000
      selector:
        matchLabels:
          app.kubernetes.io/name: juice-shop
          app.kubernetes.io/part-of: multi-juicer
      targetLabels:
        - team
  19: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      selector:
        matchLabels:
          app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
          app.kubernetes.io/name: progress-watchdog
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          labels:
            app.kubernetes.io/component: progress-tracker
            app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: progress-watchdog
            app.kubernetes.io/part-of: multi-juicer
            app.kubernetes.io/version: 42.0.0
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
              image: ghcr.io/juice-shop/multi-juicer/progress-watchdog:v42.0.0
              imagePullPolicy: IfNotPresent
              name: progress-watchdog
              ports:
                - containerPort: 8080
                  name: http
              readinessProbe:
                httpGet:
                  path: /ready
                  port: http
                initialDelaySeconds: 5
              resources:
                limits:
                  cpu: 20m
                  memory: 48Mi
                requests:
                  cpu: 20m
                  memory: 48Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
          securityContext:
            runAsNonRoot: true
          serviceAccountName: progress-watchdog
  20: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: progress-watchdog
    subjects:
      - kind: ServiceAccount
        name: progress-watchdog
  21: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - patch
  22: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
  23: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      ports:
        - name: http
          port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
production notes work correctly:
  1: |
    apiVersion: v1
    data:
      config.json: |2

        {
          "cookie": {
            "name": "balancer",
            "secure": true
          },
          "juiceShop": {
            "affinity": {},
            "config": {
              "application": {
                "favicon": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico",
                "logo": "https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png",
                "showGitHubLinks": false,
                "showVersionNumber": false
              },
              "challenges": {
                "showHints": true
              },
              "ctf": {
                "showFlagsInNotifications": false
              },
              "hackingInstructor": {
                "isEnabled": true
              }
            },
            "containerSecurityContext": {
              "allowPrivilegeEscalation": false,
              "capabilities": {
                "drop": [
                  "ALL"
                ]
              }
            },
            "ctfKey": "zLp@.-6fMW6L-7R3b!9uR_K!NfkkTr",
            "env": [],
            "envFrom": [],
            "image": "bkimminich/juice-shop",
            "imagePullPolicy": "IfNotPresent",
            "imagePullSecrets": [],
            "nodeEnv": "multi-juicer",
            "pod": {
              "annotations": {},
              "labels": {}
            },
            "podSecurityContext": {
              "runAsNonRoot": true
            },
            "resources": {
              "requests": {
                "cpu": "150m",
                "memory": "300Mi"
              }
            },
            "runtimeClassName": null,
            "tag": "v17.3.0",
            "tolerations": [],
            "volumeMounts": [],
            "volumes": []
          },
          "maxInstances": 10
        }
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-config
  2: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      replicas: 3
      selector:
        matchLabels:
          app.kubernetes.io/instance: balancer-RELEASE-NAME
          app.kubernetes.io/name: balancer
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          annotations:
            checksum/config: 97a2ab33c67c30cb3d5319fd0792d7c3c0a8acd56890efdb1316e52336fcb8f1
            checksum/secret: 7c430d8f6cf074b992d9f63d9f6fc51256eef05865623b5f19c6c12cef547179
          labels:
            app.kubernetes.io/instance: balancer-RELEASE-NAME
            app.kubernetes.io/name: balancer
            app.kubernetes.io/part-of: multi-juicer
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: MULTI_JUICER_CONFIG_ADMIN_PASSWORD
                  valueFrom:
                    secretKeyRef:
                      key: adminPassword
                      name: balancer-secret
                - name: MULTI_JUICER_CONFIG_COOKIE_SIGNING_KEY
                  valueFrom:
                    secretKeyRef:
                      key: cookieParserSecret
                      name: balancer-secret
              image: ghcr.io/juice-shop/multi-juicer/balancer:v42.0.0
              imagePullPolicy: IfNotPresent
              livenessProbe:
                httpGet:
                  path: /balancer/api/health
                  port: http
              name: multi-juicer
              ports:
                - containerPort: 8080
                  name: http
                - containerPort: 8081
                  name: metrics
              readinessProbe:
                httpGet:
                  path: /balancer/api/readiness
                  port: http
              resources:
                limits:
                  cpu: 400m
                  memory: 256Mi
                requests:
                  cpu: 400m
                  memory: 256Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
              volumeMounts:
                - mountPath: /config/config.json
                  name: config-volume
                  readOnly: true
                  subPath: config.json
          securityContext:
            runAsNonRoot: true
          serviceAccountName: balancer
          volumes:
            - configMap:
                name: balancer-config
              name: config-volume
  3: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: balancer
    subjects:
      - kind: ServiceAccount
        name: balancer
  4: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - create
          - list
          - delete
          - patch
          - watch
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - create
          - delete
      - apiGroups:
          - ""
        resources:
          - pods
        verbs:
          - get
          - list
          - delete
  5: |
    apiVersion: v1
    data:
      adminPassword: QUJDREVGR0g=
      cookieParserSecret: VEhJU19JU19BX0VYQU1QTEVfRE9OVF9VU0VfVEhJU19BU19USEVfQUNUVUFMX1NFQ1JFVA==
    kind: Secret
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer-secret
    type: Opaque
  6: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: load-balancer
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: balancer
    spec:
      ports:
        - name: web
          port: 8080
      selector:
        app.kubernetes.io/instance: balancer-RELEASE-NAME
        app.kubernetes.io/name: balancer
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
  8: |
    apiVersion: batch/v1
    kind: CronJob
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: cleanup-job
    spec:
      failedJobsHistoryLimit: 1
      jobTemplate:
        spec:
          template:
            metadata:
              labels:
                app.kubernetes.io/component: garbage-collector
                app.kubernetes.io/instance: cleaner-RELEASE-NAME
                app.kubernetes.io/managed-by: Helm
                app.kubernetes.io/name: cleaner
                app.kubernetes.io/part-of: multi-juicer
                app.kubernetes.io/version: 42.0.0
            spec:
              containers:
                - env:
                    - name: NAMESPACE
                      value: NAMESPACE
                    - name: MAX_INACTIVE_DURATION
                      value: 24h
                  image: ghcr.io/juice-shop/multi-juicer/cleaner:v42.0.0
                  imagePullPolicy: IfNotPresent
                  name: cleanup-job
                  securityContext:
                    allowPrivilegeEscalation: false
                    capabilities:
                      drop:
                        - ALL
                    readOnlyRootFilesystem: true
              restartPolicy: Never
              securityContext:
                runAsNonRoot: true
              serviceAccountName: juice-cleaner
      schedule: 0 * * * *
      successfulJobsHistoryLimit: 1
  9: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: juice-cleaner
    subjects:
      - kind: ServiceAccount
        name: juice-cleaner
  10: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - delete
          - list
      - apiGroups:
          - ""
        resources:
          - services
        verbs:
          - get
          - delete
  11: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: garbage-collector
        app.kubernetes.io/instance: cleaner-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: cleaner
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-cleaner
  12: |
    apiVersion: v1
    data:
      multi-juicer.yaml: |2-
        application:
          favicon: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/balancer/ui/public/favicon.ico
          logo: https://raw.githubusercontent.com/juice-shop/multi-juicer/main/images/multijuicer-icon-only-padding.png
          showGitHubLinks: false
          showVersionNumber: false
        challenges:
          showHints: true
        ctf:
          showFlagsInNotifications: false
        hackingInstructor:
          isEnabled: true
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/component: vulnerable-app
        app.kubernetes.io/instance: juice-shop-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: juice-shop
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: juice-shop-config
  13: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      selector:
        matchLabels:
          app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
          app.kubernetes.io/name: progress-watchdog
          app.kubernetes.io/part-of: multi-juicer
      template:
        metadata:
          labels:
            app.kubernetes.io/component: progress-tracker
            app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
            app.kubernetes.io/managed-by: Helm
            app.kubernetes.io/name: progress-watchdog
            app.kubernetes.io/part-of: multi-juicer
            app.kubernetes.io/version: 42.0.0
        spec:
          containers:
            - env:
                - name: NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
              image: ghcr.io/juice-shop/multi-juicer/progress-watchdog:v42.0.0
              imagePullPolicy: IfNotPresent
              name: progress-watchdog
              ports:
                - containerPort: 8080
                  name: http
              readinessProbe:
                httpGet:
                  path: /ready
                  port: http
                initialDelaySeconds: 5
              resources:
                limits:
                  cpu: 20m
                  memory: 48Mi
                requests:
                  cpu: 20m
                  memory: 48Mi
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                    - ALL
                readOnlyRootFilesystem: true
          securityContext:
            runAsNonRoot: true
          serviceAccountName: progress-watchdog
  14: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: RoleBinding
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    roleRef:
      apiGroup: rbac.authorization.k8s.io
      kind: Role
      name: progress-watchdog
    subjects:
      - kind: ServiceAccount
        name: progress-watchdog
  15: |
    apiVersion: rbac.authorization.k8s.io/v1
    kind: Role
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
      namespace: NAMESPACE
    rules:
      - apiGroups:
          - apps
        resources:
          - deployments
        verbs:
          - get
          - list
          - patch
  16: |
    apiVersion: v1
    kind: ServiceAccount
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
  17: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: progress-tracker
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
        app.kubernetes.io/version: 42.0.0
      name: progress-watchdog
    spec:
      ports:
        - name: http
          port: 80
          protocol: TCP
          targetPort: 8080
      selector:
        app.kubernetes.io/instance: progress-watchdog-RELEASE-NAME
        app.kubernetes.io/name: progress-watchdog
        app.kubernetes.io/part-of: multi-juicer
      type: ClusterIP
